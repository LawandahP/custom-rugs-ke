(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{118:function(e,t,a){},119:function(e,t,a){},145:function(e,t){},146:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(28),s=a.n(n),i=a(7),o=a(63),l=a(97),j=a(98),d=a(2),u="CURRENCY_CONVERT_REQUEST",b="CURRENCY_CONVERT_SUCCESS",h="CURRENCY_CONVERT_FAIL",p="PRODUCT_LIST_REQUEST",O="PRODUCT_LIST_SUCCESS",x="PRODUCT_LIST_FAIL",m="PRODUCT_DETAILS_REQUEST",f="PRODUCT_DETAILS_SUCCESS",g="PRODUCT_DETAILS_FAIL",y="PRODUCT_DELETE_REQUEST",v="PRODUCT_DELETE_SUCCESS",S="PRODUCT_DELETE_FAIL",E="PRODUCT_CREATE_REQUEST",C="PRODUCT_CREATE_SUCCESS",I="PRODUCT_CREATE_FAIL",_="PRODUCT_CREATE_RESET",L="PRODUCT_UPDATE_REQUEST",N="PRODUCT_UPDATE_SUCCESS",w="PRODUCT_UPDATE_FAIL",k="PRODUCT_CREATE_REVIEW_REQUEST",R="PRODUCT_CREATE_REVIEW_SUCCESS",T="PRODUCT_CREATE_REVIEW_FAIL",P="PRODUCT_CREATE_REVIEW_RESET",A="PRODUCT_TOP_REQUEST",D="PRODUCT_TOP_SUCCESS",U="PRODUCT_TOP_FAIL",G=a(42),M="CART_ADD_ITEM",F="CART_REMOVE_ITEM",K="CART_SAVE_SHIPPING_ADDRESS",Q="CART_SAVE_PAYMENT_METHOD",B="CART_CLEAR_ITEMS";function z(e){var t=e.toString().split(".");return t[0].length>=3&&(t[0]=t[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),t[1]&&t[1].length>=3&&(t[1]=t[1].replace(/(\d{3})/g,"$1 ")),t.join(".")}var H="USER_LOGIN_SUCCESS",Y="USER_LOGIN_REQUEST",q="USER_LOGIN_FAIL",V="USER_LOGOUT",J="USER_REGISTER_SUCCESS",W="USER_REGISTER_REQUEST",Z="USER_REGISTER_FAIL",$="USER_DETAILS_SUCCESS",X="USER_DETAILS_REQUEST",ee="USER_DETAILS_FAIL",te="USER_DETAILS_RESET",ae="USER_UPDATE_PROFILE_SUCCESS",re="USER_UPDATE_PROFILE_REQUEST",ce="USER_UPDATE_PROFILE_FAIL",ne="USER_UPDATE_PROFILE_RESET",se="USER_LIST_SUCCESS",ie="USER_LIST_REQUEST",oe="USER_LIST_FAIL",le="USER_LIST_RESET",je="USER_DELETE_SUCCESS",de="USER_DELETE_REQUEST",ue="USER_DELETE_FAIL",be="USER_UPDATE_SUCCESS",he="USER_UPDATE_REQUEST",pe="USER_UPDATE_FAIL",Oe="USER_UPDATE_RESET",xe="ORDER_CREATE_REQUEST",me="ORDER_CREATE_SUCCESS",fe="ORDER_CREATE_FAIL",ge="ORDER_CREATE_RESET",ye="ORDER_DETAILS_REQUEST",ve="ORDER_DETAILS_SUCCESS",Se="ORDER_DETAILS_FAIL",Ee="ORDER_PAY_REQUEST",Ce="ORDER_PAY_SUCCESS",Ie="ORDER_PAY_FAIL",_e="ORDER_PAY_RESET",Le="ORDER_LIST_MY_REQUEST",Ne="ORDER_LIST_MY_SUCCESS",we="ORDER_LIST_MY_FAIL",ke="ORDER_LIST_MY_RESET",Re="ORDER_LIST_REQUEST",Te="ORDER_LIST_SUCCESS",Pe="ORDER_LIST_FAIL",Ae="ORDER_DELIVER_REQUEST",De="ORDER_DELIVER_SUCCESS",Ue="ORDER_DELIVER_FAIL",Ge="ORDER_DELIVER_RESET",Me="GET_LOCATION_REQUEST",Fe="GET_LOCATION_SUCCESS",Ke="GET_LOCATION_FAIL",Qe="GALLERY_LIST_REQUEST",Be="GALLERY_LIST_SUCCESS",ze="GALLERY_LIST_FAIL",He="MPESA_STK_PUSH_REQUEST",Ye="MPESA_STK_PUSH_SUCCESS",qe="MPESA_STK_PUSH_FAIL",Ve=Object(o.combineReducers)({useGeolocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{coordinates:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(d.a)({loading:!0},e);case Fe:return{loading:!1,coordinates:{lat:t.payload.lat,lng:t.payload.lng}};case Ke:return{loading:!1,error:t.payload};default:return e}},productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{loading:!0,products:[]};case O:return{loading:!1,products:t.payload.products,page:t.payload.page,pages:t.payload.pages};case x:return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(d.a)({loading:!0},e);case f:return{loading:!1,product:t.payload};case g:return{loading:!1,error:t.payload};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{loading:!0};case v:return{loading:!1,success:!0};case S:return{loading:!1,error:t.payload};default:return e}},productCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{loading:!0};case C:return{loading:!1,success:!0,product:t.payload};case I:return{loading:!1,error:t.payload};case _:return{};default:return e}},productUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{loading:!0};case N:return{loading:!1,success:!0,product:t.payload};case w:return{loading:!1,error:t.payload};default:return e}},productReviewCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case R:return{loading:!1,success:!0};case T:return{loading:!1,error:t.payload};case P:return{};default:return e}},productTopRated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{loading:!0,products:[]};case D:return{loading:!1,success:!0,products:t.payload};case U:return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shippingAddress:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:var a=t.payload,r=e.cartItems.find((function(e){return e.product===a.product}));return r?Object(d.a)(Object(d.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===r.product?a:e}))}):Object(d.a)(Object(d.a)({},e),{},{cartItems:[].concat(Object(G.a)(e.cartItems),[a])});case F:return Object(d.a)(Object(d.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});case K:return Object(d.a)(Object(d.a)({},e),{},{shippingAddress:t.payload});case Q:return Object(d.a)(Object(d.a)({},e),{},{paymentMethod:t.payload});case B:return Object(d.a)(Object(d.a)({},e),{},{cartItems:[]});default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{loading:!0};case H:return{loading:!1,userInfo:t.payload};case q:return{loading:!1,error:t.payload};case V:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{loading:!0};case J:return{loading:!1,userInfo:t.payload};case Z:return{loading:!1,error:t.payload};case V:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case $:return{loading:!1,user:t.payload};case ee:return{loading:!1,error:t.payload};case te:return{user:{}};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{loading:!0};case ae:return{loading:!1,success:!0,userInfo:t.payload};case ce:return{loading:!1,error:t.payload};case ne:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return{loading:!0};case se:return{loading:!1,users:t.payload};case oe:return{loading:!1,error:t.payload};case le:return{users:[]};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return{loading:!0};case be:return{loading:!1,success:!0};case pe:return{loading:!1,error:t.payload};case Oe:return{user:{}};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return{loading:!0};case je:return{loading:!1,success:!0};case ue:return{loading:!1,error:t.payload};default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return{loading:!0};case me:return{loading:!1,success:!0,order:t.payload};case fe:return{loading:!1,error:t.payload};case ge:return{};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,orderItems:[],shippngAddress:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case ve:return{loading:!1,order:t.payload};case Se:return{loading:!1,error:t.payload};default:return e}},orderPay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return{loading:!0};case Ce:return{loading:!1,success:!0};case Ie:return{loading:!1,error:t.payload};case _e:return{};default:return e}},orderListMy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:return{loading:!0};case Ne:return{loading:!1,orders:t.payload};case we:return{loading:!1,error:t.payload};case ke:return{orders:[]};default:return e}},orderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return{loading:!0};case Te:return{loading:!1,orders:t.payload};case Pe:return{loading:!1,error:t.payload};default:return e}},orderDeliver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae:return{loading:!0};case De:return{loading:!1,success:!0};case Ue:return{loading:!1,error:t.payload};case Ge:return{};default:return e}},galleryList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{images:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return{loading:!0};case Be:return{loading:!1,images:t.payload};case ze:return{loading:!1,error:t.payload};default:return e}},currencyConvert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,result:null,fromCurrency:"KES",toCurrency:"USD",amount:Number,currencies:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case b:return{loading:!1,order:t.payload};case h:return{loading:!1,error:t.payload};default:return e}},stkPush:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return{loading:!0};case Ye:return{loading:!1,success:!0,message:t.payload.ResponseDescription};case qe:return{loading:!1,error:t.payload.errorMessage};default:return e}}}),Je=localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],We=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null,Ze={cart:{cartItems:Je,shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):{}},userLogin:{userInfo:We}},$e=[l.a],Xe=Object(o.createStore)(Ve,Ze,Object(j.composeWithDevTools)(o.applyMiddleware.apply(void 0,$e))),et=(a(118),a(119),a(162)),tt=a(11),at=a(22),rt=a(179),ct=a(102),nt=a(173),st=a(19),it=a(8),ot=a(176),lt=a(164),jt=a(100),dt=a(163),ut=a(99),bt=a(0);var ht=function(e){var t=e.children;return Object(bt.jsx)(et.a,{children:Object(bt.jsx)(dt.a,{className:"justify-content-md-center",children:Object(bt.jsx)(ut.a,{xs:12,md:8,children:t})})})};var pt=function(){var e=Object(r.useState)(""),t=Object(it.a)(e,2),a=t[0],c=t[1],n=Object(at.k)();return Object(bt.jsx)(ot.a,{onSubmit:function(e){e.preventDefault(),a||"/shop"===n.location.pathname?n.push("shop/?search=".concat(a,"&page=1")):n.push(n.location.pathname)},inline:!0,children:Object(bt.jsxs)(lt.a,{children:[Object(bt.jsx)(ot.a.Control,{style:{color:"#f16100",height:"100%",borderRadius:"3rem",borderColor:"#f16100"},placeholder:"search...","aria-label":"search",onChange:function(e){return c(e.target.value)}}),Object(bt.jsx)(jt.a,{type:"submit",title:"search",style:{color:"#f16100"},variant:"none",id:"search-button",children:Object(bt.jsx)("i",{className:"fas fa-search"})})]})})},Ot=a(10),xt=a.n(Ot),mt=a(12),ft=a(13),gt=a.n(ft),yt=function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:X}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.get("/api/users/".concat(e),s);case 6:i=t.sent,o=i.data,a({type:$,payload:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ee,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},vt=a(181);var St=function(e){var t=e.variant,a=e.children;return Object(bt.jsx)(vt.a,{variant:t,children:a})},Et=a(165);var Ct=function(){return Object(bt.jsx)(Et.a,{animation:"border",role:"status",style:{color:"#f16100",fontWeight:"5rem",height:"3rem",width:"3rem",margin:"auto",display:"block"},children:Object(bt.jsx)("span",{className:"sr-only",children:"Loading..."})})},It=function(){var e=Object(r.useState)({loaded:!1,coordinates:{lat:"",lng:""}}),t=Object(it.a)(e,2),a=t[0],c=t[1],n=function(e){c({loaded:!0,coordinates:{lat:e.coords.latitude,lng:e.coords.longitude}})},s=function(e){c({loaded:!0,error:{code:e.code,message:e.message}})};return Object(r.useEffect)((function(){"geolocation"in navigator||s({code:0,message:"Geolocation not supported"}),navigator.geolocation.getCurrentPosition(n,s)}),[]),a};var _t=function(){var e=Object(i.c)((function(e){return e.cart})).cartItems,t=Object(i.c)((function(e){return e.userLogin})).userInfo,a=(It(),Object(i.b)()),r=function(){a((function(e){localStorage.removeItem("userInfo"),e({type:V}),e({type:te}),e({type:ke}),e({type:le})}))};return Object(bt.jsx)("div",{children:Object(bt.jsx)(rt.a,{variant:"",expand:"lg",collapseOnSelect:!0,children:Object(bt.jsxs)(et.a,{children:[Object(bt.jsx)(st.LinkContainer,{to:"/",children:Object(bt.jsx)(rt.a.Brand,{children:"CustomRugsKenya"})}),Object(bt.jsx)(rt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(bt.jsx)(rt.a.Collapse,{id:"basic-navbar-nav",children:Object(bt.jsxs)(ct.a,{className:"ml-auto",children:[Object(bt.jsx)(pt,{xs:12}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsx)(st.LinkContainer,{to:"/",children:Object(bt.jsx)(ct.a.Link,{children:"Home"})}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsx)(st.LinkContainer,{to:"/about-us",children:Object(bt.jsx)(ct.a.Link,{children:"About Us"})}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsx)(st.LinkContainer,{to:"/our-projects",children:Object(bt.jsx)(ct.a.Link,{children:"Our Projects"})}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsx)(st.LinkContainer,{to:"/shop",children:Object(bt.jsx)(ct.a.Link,{children:"Shop"})}),Object(bt.jsx)(nt.a.Divider,{}),t&&!t.isAdmin?Object(bt.jsx)("div",{children:Object(bt.jsxs)(nt.a,{title:Object(bt.jsx)("span",{children:Object(bt.jsx)("strong",{children:Object(bt.jsxs)("i",{class:"fas fa-user-check",children:[" Hi, ",t.username]})})}),children:[Object(bt.jsx)(st.LinkContainer,{to:"/profile",children:Object(bt.jsxs)(nt.a.Item,{children:[Object(bt.jsx)("i",{class:"fas fa-user-circle"}),"  My Account"]})}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsxs)(nt.a.Item,{onClick:r,children:[Object(bt.jsx)("i",{class:"fas fa-sign-out-alt"}),"  Logout"]})]})}):t?"":Object(bt.jsx)(st.LinkContainer,{to:"/login",children:Object(bt.jsxs)(ct.a.Link,{children:[Object(bt.jsx)("i",{className:"fas fa-user-circle"})," SIGN IN"]})}),t&&t.isAdmin?Object(bt.jsxs)(nt.a,{title:Object(bt.jsx)("span",{children:Object(bt.jsx)("strong",{children:Object(bt.jsxs)("i",{class:"fas fa-user-check",children:[" Hi, ",t.username]})})}),children:[Object(bt.jsx)(nt.a.Item,{children:"  Admin"}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsx)(st.LinkContainer,{to:"/profile",children:Object(bt.jsxs)(nt.a.Item,{children:[Object(bt.jsx)("i",{class:"fas fa-user-circle"}),"  My Account"]})}),Object(bt.jsx)(st.LinkContainer,{to:"/users",children:Object(bt.jsxs)(nt.a.Item,{children:[Object(bt.jsx)("i",{class:"fas fa-users"}),"  Users"]})}),Object(bt.jsx)(st.LinkContainer,{to:"/products",children:Object(bt.jsxs)(nt.a.Item,{children:[Object(bt.jsx)("i",{class:"fab fa-product-hunt"}),"  Products"]})}),Object(bt.jsx)(st.LinkContainer,{to:"/orders",children:Object(bt.jsxs)(nt.a.Item,{children:[Object(bt.jsx)("i",{class:"fab fa-product-hunt"}),"  Orders"]})}),Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsxs)(nt.a.Item,{onClick:r,children:[Object(bt.jsx)("i",{class:"fas fa-sign-out-alt"}),"  Logout"]})]}):"",Object(bt.jsx)(nt.a.Divider,{}),Object(bt.jsx)(st.LinkContainer,{align:"center",title:"cart",to:"/cart",children:Object(bt.jsx)(ct.a.Link,{children:Object(bt.jsx)("i",{className:"fas fa-shopping-cart",children:Object(bt.jsx)("sup",{style:{fontSize:15,color:"#f16100",padding:3},children:e.reduce((function(e,t){return e+t.Qty}),0)})})})})]})})]})})})};var Lt=function(){return Object(bt.jsx)("footer",{children:Object(bt.jsx)(et.a,{children:Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,{className:"text-center py-3",children:"Copyright \xa9 Custom Rugs Kenya"})})})})},Nt=a(180);var wt=function(e){var t=e.value,a=e.text,r=e.color;return Object(bt.jsxs)("div",{className:"rating",children:[Object(bt.jsx)("span",{children:Object(bt.jsx)("i",{style:{color:r},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(bt.jsx)("span",{children:Object(bt.jsx)("i",{style:{color:r},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(bt.jsx)("span",{children:Object(bt.jsx)("i",{style:{color:r},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(bt.jsx)("span",{children:Object(bt.jsx)("i",{style:{color:r},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(bt.jsx)("span",{children:Object(bt.jsx)("i",{style:{color:r},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(bt.jsx)("span",{children:a&&a})]})};var kt=function(e){var t=e.product;return Object(bt.jsxs)(Nt.a,{className:"p-1 my-1 rounded",children:[Object(bt.jsx)(tt.Link,{to:"/product/".concat(t.slug),children:Object(bt.jsx)(Nt.a.Img,{src:t.image})}),Object(bt.jsxs)(Nt.a.Body,{as:"div",children:[Object(bt.jsx)(tt.Link,{to:"/product/".concat(t.slug),children:Object(bt.jsx)(Nt.a.Title,{children:t.name})}),Object(bt.jsx)(Nt.a.Text,{as:"div",children:Object(bt.jsx)("div",{className:"my-2",children:Object(bt.jsx)(wt,{value:t.rating,color:"#f16100"})})}),Object(bt.jsxs)(Nt.a.Text,{children:["KES ",z(Number(t.price))]})]})]})},Rt=a(182);var Tt=function(e){var t=e.pages,a=e.page,r=e.search,c=void 0===r?"":r,n=e.isAdmin,s=void 0!==n&&n;return c&&(c=c.split("?search=")[1].split("&")[0]),console.log("search:",c),t>1&&Object(bt.jsx)(Rt.a,{variant:"info",children:Object(G.a)(Array(t).keys()).map((function(e){return Object(bt.jsx)(st.LinkContainer,{to:s?"products/?search=".concat(c,"&page=").concat(e+1):"shop/?search=".concat(c,"&page=").concat(e+1),children:Object(bt.jsx)(Rt.a.Item,{color:"#f16100",active:e+1===a,children:e+1})},e+1)}))})},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(mt.a)(xt.a.mark((function t(a){var r,c;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:p}),t.next=4,gt.a.get("/api/products".concat(e));case 4:r=t.sent,c=r.data,a({type:O,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:x,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},At=function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a){var r,c;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:m}),t.next=4,gt.a.get("/api/products/".concat(e));case 4:r=t.sent,c=r.data,a({type:f,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:g,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Dt=function(){return function(){var e=Object(mt.a)(xt.a.mark((function e(t,a){var r,c,n,s,i;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:E}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,gt.a.post("/api/products/create",{},n);case 6:s=e.sent,i=s.data,t({type:C,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:I,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()};var Ut=function(e){var t=e.history,a=Object(i.b)(),c=Object(i.c)((function(e){return e.productList})),n=c.error,s=c.loading,o=c.products,l=c.page,j=c.pages,d=t.location.search;return Object(r.useEffect)((function(){a(Pt(d))}),[a,d]),Object(bt.jsx)("div",{children:s?Object(bt.jsx)(Ct,{}):n?Object(bt.jsx)(St,{variant:"danger",children:n}):Object(bt.jsxs)("div",{children:[Object(bt.jsx)(dt.a,{className:"my-2",children:o.map((function(e){return Object(bt.jsx)(ut.a,{style:{textAlign:"center"},xs:6,md:6,lg:4,xl:3,children:Object(bt.jsx)(kt,{product:e})},e.slug)}))}),Object(bt.jsx)(Tt,{page:l,pages:j,search:d})]})})},Gt=(a(178),a(166));var Mt=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.galleryList})),a=t.error,c=t.loading,n=t.images;return Object(r.useEffect)((function(){e(function(){var e=Object(mt.a)(xt.a.mark((function e(t){var a,r;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Qe}),e.next=4,gt.a.get("/api/gallery");case 4:a=e.sent,r=a.data,t({type:Be,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:ze,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(bt.jsx)("div",{children:c?Object(bt.jsx)(Ct,{}):a?Object(bt.jsx)(St,{variant:"danger",children:a}):Object(bt.jsxs)("div",{children:[Object(bt.jsx)(dt.a,{className:"pt-5",children:Object(bt.jsx)(ut.a,{align:"center",children:Object(bt.jsx)("h1",{style:{color:"#000"},children:"Get Your Personalized Rug Today"})})}),Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,{align:"center",children:Object(bt.jsx)("p",{children:"The best design inspiration - expertly curated for you"})})}),Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,{align:"center",children:Object(bt.jsx)(tt.Link,{to:"/shop",children:Object(bt.jsx)(jt.a,{style:{borderRadius:"3rem"},children:"VISIT OUR SHOP"})})})}),Object(bt.jsx)(dt.a,{className:"pt-5",align:"center",children:n.map((function(e){return Object(bt.jsx)(ut.a,{md:6,xs:6,sm:6,xl:3,className:"my-2",children:Object(bt.jsx)(Nt.a,{style:{boxShadow:"2px 2px 2px 2px grey",borderRadius:"1rem"},children:Object(bt.jsx)(Gt.a,{style:{borderRadius:"1rem",boxShadow:"5px"},src:e.picture})})})}))})]})})};var Ft=function(){return Object(bt.jsx)("div",{children:Object(bt.jsx)(Mt,{})})},Kt=a(18),Qt=a(183),Bt=a(169),zt=a(177),Ht=a(167),Yt=a(175),qt=a(174);var Vt=function(e){var t,a=e.match,n=e.history,s=Object(r.useState)(1),o=Object(it.a)(s,2),l=o[0],j=o[1],d=Object(r.useState)(0),u=Object(it.a)(d,2),b=u[0],h=u[1],p=Object(r.useState)(""),O=Object(it.a)(p,2),x=O[0],m=O[1],f=Object(r.useState)(""),g=Object(it.a)(f,2),y=g[0],v=g[1],S=Object(i.b)(),E=Object(i.c)((function(e){return e.productDetails})),C=E.error,I=E.loading,_=E.product,L=Object(i.c)((function(e){return e.userLogin})).userInfo,N=Object(i.c)((function(e){return e.productReviewCreate})),w=N.error,A=N.loading,D=N.success;Object(r.useEffect)((function(){D&&(h(0),v(""),m(""),S({type:P})),S(At(a.params.id))}),[S,a,D]);var U={0:"Select Stars",1:Object(bt.jsxs)("p",{children:["I hate it! ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-sad-cry"})]}),2:Object(bt.jsxs)("p",{children:["I don't like it! ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-sad-tear"})]}),3:Object(bt.jsxs)("p",{children:["It's Alright ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-meh-blank"})]}),4:Object(bt.jsxs)("p",{children:["I Like it ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-laugh"})]}),5:Object(bt.jsxs)("p",{children:["I Love It ",Object(bt.jsx)("i",{style:{color:"red"},className:"fas fa-heart"})]})},M=Object(Ht.a)({root:{display:"flex",alignItems:"center"}})(),F=c.a.useState(-1),K=Object(it.a)(F,2),Q=K[0],B=K[1];return Object(bt.jsxs)("div",{children:[Object(bt.jsx)(tt.Link,{to:"/shop",variant:"info",type:"button",children:"Continue shopping"}),I?Object(bt.jsx)(Ct,{}):C?Object(bt.jsx)(St,{variant:"danger",children:C}):Object(bt.jsxs)("div",{children:[Object(bt.jsxs)(dt.a,{"m-y":"4",children:[Object(bt.jsx)(ut.a,{className:"my-1 rounded",md:6,sm:12,xl:6,children:Object(bt.jsx)(Nt.a,{className:"rounded",children:Object(bt.jsx)(Gt.a,{src:_.image,alt:_.name,fluid:!0})})}),Object(bt.jsx)(ut.a,{className:"my-1",md:6,xl:6,children:Object(bt.jsxs)(Qt.a,{variant:"flush",children:[Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h1",{style:{color:"#000",textAlign:"center"},children:_.name}),Object(bt.jsx)("div",{className:"my-1",align:"center",children:Object(bt.jsx)(wt,{value:_.rating,text:"".concat(_.numReviews," reviews"),color:"#f16100",style:{textAlign:"center"}})}),Object(bt.jsxs)("h5",{style:{textAlign:"center"},children:["KES ",z(Number(_.price))]})]}),Object(bt.jsx)(Qt.a.Item,{className:"my-2 mb-2",children:Object(bt.jsx)(dt.a,{children:Object(bt.jsxs)(ut.a,{children:[Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{className:"text-start",children:Object(bt.jsx)("h5",{children:"QUANTITY"})}),Object(bt.jsx)(ut.a,{className:"text-end",children:_.countInStock>0?Object(bt.jsx)("h6",{children:Object(bt.jsx)(Bt.a,{bg:"success",children:"In Stock"})}):Object(bt.jsx)("h6",{children:Object(bt.jsx)(Bt.a,{bg:"danger",children:"SOLD OUT"})})})]}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{md:3,xs:4,children:Object(bt.jsx)(ot.a.Control,{as:"select",value:l,onChange:function(e){return j(e.target.value)},children:Object(G.a)(Array(_.countInStock).keys()).map((function(e){return Object(bt.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(bt.jsx)(ut.a,{md:9,xs:8,children:Object(bt.jsx)("div",{className:"d-grid gap-2 ",children:Object(bt.jsx)(jt.a,{onClick:function(){n.push("/cart/".concat(a.params.id,"?Qty=").concat(l))},disabled:0==_.countInStock,type:"button",children:"Add To Cart"})})})]})]})})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsx)(zt.a,{defaultActiveKey:"0",children:Object(bt.jsxs)(zt.a.Item,{eventKey:"0",children:[Object(bt.jsx)(zt.a.Header,{children:"Description"}),Object(bt.jsx)(zt.a.Body,{children:Object(bt.jsx)("p",{className:"text-muted",children:_.description})})]})})})]})})]}),Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,(t={md:6,xl:6},Object(Kt.a)(t,"md",12),Object(Kt.a)(t,"children",Object(bt.jsxs)(Qt.a,{variant:"flush",children:[Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{className:"text-start",children:Object(bt.jsx)("h6",{style:{color:"#000"},children:"CUSTOMER FEEDBACK"})}),Object(bt.jsxs)(ut.a,{className:"text-end",children:[0===_.reviews.length&&Object(bt.jsx)("h6",{children:Object(bt.jsx)(Bt.a,{bg:"warning",children:"No reviews"})}),1===_.reviews.length&&Object(bt.jsx)("h6",{children:Object(bt.jsxs)(Bt.a,{bg:"info",children:[_.reviews.length," review"]})}),_.reviews.length>1&&Object(bt.jsx)("h6",{children:Object(bt.jsxs)(Bt.a,{bg:"info",children:[_.reviews.length," reviews"]})})]})]})}),_.reviews.map((function(e){return Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsxs)("strong",{children:[e.created_at.substring(0,10)," by ",e.name.toLowerCase()]}),Object(bt.jsx)(wt,{value:e.rating,color:"#f16100"}),1==e.rating&&Object(bt.jsxs)("p",{children:["I hate it! ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-sad-cry"})]}),2==e.rating&&Object(bt.jsxs)("p",{children:["I don't like it! ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-sad-tear"})]}),3==e.rating&&Object(bt.jsxs)("p",{children:["It's Alright ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-meh-blank"})]}),4==e.rating&&Object(bt.jsxs)("p",{children:["I Like it ",Object(bt.jsx)("i",{style:{color:"#f16100"},class:"fas fa-laugh"})]}),5==e.rating&&Object(bt.jsxs)("p",{children:["I Love It ",Object(bt.jsx)("i",{style:{color:"red"},className:"fas fa-heart"})]}),Object(bt.jsx)("p",{children:e.comment})]},e.slug)})),Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h6",{children:"leave a review"}),A&&Object(bt.jsx)(Ct,{}),D&&Object(bt.jsx)(St,{variant:"success",children:"Review Submitted Successfully"}),w&&Object(bt.jsx)(St,{variant:"danger",children:w}),L?Object(bt.jsxs)(ot.a,{onSubmit:function(e){var t,r;e.preventDefault(),S((t=a.params.id,r={rating:b,reviewTitle:y,comment:x},function(){var e=Object(mt.a)(xt.a.mark((function e(a,c){var n,s,i,o,l;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:k}),n=c(),s=n.userLogin.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,gt.a.post("/api/products/review/".concat(t),r,i);case 6:o=e.sent,l=o.data,a({type:R,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:T,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(bt.jsx)(ot.a.Group,{controlId:"rating",children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{className:"text-start",children:Object(bt.jsx)("div",{className:M.root,children:Object(bt.jsx)(ot.a.Control,{as:"none",value:b,onChange:function(e){h(e.target.value)},children:Object(bt.jsx)(Yt.a,{style:{color:"#f16100"},name:"rating-feedback",value:b,precision:1,onChange:function(e){return h(e.target.value)},onChangeActive:function(e,t){B(t)}})})})}),Object(bt.jsx)(ut.a,{className:"text-end",children:null!==b&&Object(bt.jsx)(qt.a,{ml:2,children:U[-1!==Q?Q:b]})})]})}),Object(bt.jsxs)(ot.a.Group,{controlId:"comment",children:[Object(bt.jsx)(ot.a.Label,{children:"Review"}),Object(bt.jsx)(ot.a.Control,{placeholder:"Tell us more about your rating...",as:"textarea",row:"5",value:x,onChange:function(e){return m(e.target.value)}})]}),Object(bt.jsx)("div",{className:"d-grid gap-2 ",children:Object(bt.jsx)(jt.a,{className:"my-2",disabled:A,type:"submit",children:"submit your review"})})]}):Object(bt.jsxs)(St,{variant:"info",children:["Please ",Object(bt.jsx)(tt.Link,{to:"/login",children:"login"})," to review this product"]})]})]})),t))})]})]})};var Jt=function(){return Object(bt.jsxs)("div",{className:"pt-5",style:{textAlign:"center",alignContent:"center"},children:[Object(bt.jsx)(dt.a,{children:Object(bt.jsx)("i",{style:{fontSize:"12rem",color:"#f16100"},class:"fas fa-cart-arrow-down"})}),Object(bt.jsx)(tt.Link,{to:"/shop",className:"btn btn-outline-secondary my-3",children:"Add Items to Cart"})]})},Wt=function(e,t){return function(){var a=Object(mt.a)(xt.a.mark((function a(r,c){var n,s;return xt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,gt.a.get("/api/products/".concat(e));case 2:n=a.sent,s=n.data,r({type:M,payload:{product:s.slug,name:s.name,image:s.image,price:s.price,countInStock:s.countInStock,Qty:t}}),localStorage.setItem("cartItems",JSON.stringify(c().cart.cartItems));case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()};var Zt=function(e){var t=e.match,a=e.location,c=e.history,n=t.params.id,s=a.search?Number(a.search.split("=")[1]):1,o=Object(i.b)(),l=Object(i.c)((function(e){return e.userLogin})).userInfo,j=Object(i.c)((function(e){return e.cart})).cartItems;console.log("cartItems",j),Object(r.useEffect)((function(){n&&o(Wt(n,s))}),[o,n,s,l,c]);var d=function(e){o(function(e){return function(t,a){t({type:F,payload:e}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems))}}(e))};return Object(bt.jsx)("div",{children:0===j.length?Object(bt.jsx)(Jt,{}):Object(bt.jsxs)("div",{children:[Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,{className:"my-2",children:Object(bt.jsxs)("h3",{style:{color:"#f16100",padding:3},children:["Cart(",j.reduce((function(e,t){return e+t.Qty}),0),") items"]})})}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:Object(bt.jsx)(Qt.a,{variant:"flush",children:j.map((function(e){return Object(bt.jsx)(Qt.a.Item,{style:{backgroundColor:"#f0f0f0"},children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{xs:3,xl:3,children:Object(bt.jsx)(tt.Link,{to:"/product/".concat(e.product),children:Object(bt.jsx)(Gt.a,{src:e.image,alt:e.name,fluid:!0})})}),Object(bt.jsx)(ut.a,{xs:4,xl:3,className:"text-start",children:Object(bt.jsxs)("ul",{children:[Object(bt.jsx)("li",{children:Object(bt.jsx)(tt.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(bt.jsxs)("li",{children:["KES ",z(e.price)]})]})}),Object(bt.jsx)(ut.a,{md:"auto",xs:"auto",xl:3,className:"my-1",children:Object(bt.jsx)(ot.a.Control,{as:"select",title:"How many do you prefer?",value:e.Qty,onChange:function(t){return o(Wt(e.product,Number(t.target.value)))},children:Object(G.a)(Array(e.countInStock).keys()).map((function(e){return Object(bt.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(bt.jsx)(ut.a,{xs:1,xl:3,className:"my-3",children:Object(bt.jsx)("i",{className:"fas fa-trash-alt",title:"remove item from cart",style:{color:"#FF0000"},type:"button",variant:"danger",onClick:function(){return d(e.product)}})})]})},e.product)}))})}),Object(bt.jsx)(ut.a,{md:6,xl:4,className:"my-2",children:Object(bt.jsx)(Nt.a,{children:Object(bt.jsxs)(Qt.a,{variant:"flush",children:[Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"SubTotal:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(j.reduce((function(e,t){return e+t.Qty*t.price}),0).toFixed(2))," "]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{align:"center",children:[Object(bt.jsx)(ut.a,{md:6,children:Object(bt.jsx)(tt.Link,{to:"/shop",className:"btn btn-outline-secondary my-3",children:"Continue shopping"})}),Object(bt.jsx)(ut.a,{md:6,children:Object(bt.jsx)(jt.a,{type:"button",className:"btn btn-primary my-3",disabled:0===j.length,onClick:function(){l?c.push("/shipping"):c.push("/login?redirect=shop/shipping")},children:"PROCEED TO CHECKOUT"})})]})})]})})})]})]})})};var $t=function(e){var t=e.location,a=e.history,c=Object(r.useState)(""),n=Object(it.a)(c,2),s=n[0],o=n[1],l=Object(r.useState)(""),j=Object(it.a)(l,2),d=j[0],u=j[1],b=Object(i.b)(),h=t.search?t.search.split("="[1]):"/shop",p=Object(i.c)((function(e){return e.userLogin})),O=p.error,x=p.loading,m=p.userInfo,f=Object(r.useState)(!1),g=Object(it.a)(f,2),y=g[0],v=g[1];return Object(r.useEffect)((function(){m&&a.push(h)}),[a,m,h]),Object(bt.jsxs)(ht,{children:[Object(bt.jsx)("h3",{children:"SIGN IN"}),O&&Object(bt.jsx)(St,{variant:"danger",children:O}),x&&Object(bt.jsx)(Ct,{}),Object(bt.jsxs)(ot.a,{onSubmit:function(e){e.preventDefault(),b(function(e,t){return function(){var a=Object(mt.a)(xt.a.mark((function a(r){var c,n,s;return xt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Y}),c={headers:{"Content-type":"application/json"}},a.next=5,gt.a.post("/api/users/login",{email:e,password:t},c);case 5:n=a.sent,s=n.data,r({type:H,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),r({type:q,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(s,d))},children:[Object(bt.jsxs)(ot.a.Group,{controlId:"email",children:[Object(bt.jsx)(ot.a.Label,{children:"Email Address"}),Object(bt.jsx)(ot.a.Control,{type:"email",placeholder:"Enter Email",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(bt.jsxs)(ot.a.Group,{controlId:"password",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Password"}),Object(bt.jsxs)(lt.a,{className:"mb-3",children:[Object(bt.jsx)(ot.a.Control,{required:!0,type:y?"text":"password",placeholder:"Enter Password",value:d,onChange:function(e){return u(e.target.value)}}),Object(bt.jsx)(lt.a.Text,{id:"hide-show-pwd",title:y?"Hide password":"Show Password",onClick:function(){return v((function(e){return!e}))},children:y?Object(bt.jsx)("i",{className:"fas fa-eye-slash"}):Object(bt.jsx)("i",{className:"fas fa-eye"})})]})]}),Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",align:"center",children:Object(bt.jsx)(jt.a,{type:"submit",align:"center",className:"d-grid gap-2 my-3",children:"Sign In"})})]}),Object(bt.jsx)(dt.a,{className:"py-3",children:Object(bt.jsxs)(ut.a,{children:["New Customer?",Object(bt.jsx)(tt.Link,{to:h?"/register?redirect=".concat(h):"/register",children:" Register"})]})})]})};var Xt=function(e){var t=e.location,a=e.history,c=Object(r.useState)(""),n=Object(it.a)(c,2),s=n[0],o=n[1],l=Object(r.useState)(""),j=Object(it.a)(l,2),d=j[0],u=j[1],b=Object(r.useState)(""),h=Object(it.a)(b,2),p=h[0],O=h[1],x=Object(r.useState)(""),m=Object(it.a)(x,2),f=m[0],g=m[1],y=Object(r.useState)(""),v=Object(it.a)(y,2),S=v[0],E=v[1],C=Object(r.useState)(""),I=Object(it.a)(C,2),_=(I[0],I[1],Object(r.useState)(!1)),L=Object(it.a)(_,2),N=L[0],w=L[1],k=Object(i.b)(),R=t.search?t.search.split("="[1]):"/shop",T=Object(i.c)((function(e){return e.userRegister})),P=T.error,A=T.loading,D=T.userInfo;return Object(r.useEffect)((function(){D&&a.push(R)}),[a,D,R]),Object(bt.jsxs)(ht,{children:[Object(bt.jsx)("h3",{children:"Create Account"}),P&&Object(bt.jsx)(St,{variant:"danger",children:P}),A&&Object(bt.jsx)(Ct,{}),Object(bt.jsxs)(ot.a,{onSubmit:function(e){e.preventDefault(),k(function(e,t,a,r,c){return function(){var n=Object(mt.a)(xt.a.mark((function n(s){var i,o,l;return xt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s({type:W}),i={headers:{"Content-type":"application/json"}},n.next=5,gt.a.post("/api/users/register",{first_name:e,last_name:t,email:a,phone_number:r,password:c},i);case 5:o=n.sent,l=o.data,s({type:J,payload:l}),s({type:H,payload:l}),localStorage.setItem("userInfo",JSON.stringify(l)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),s({type:Z,payload:n.t0.response&&n.t0.response.data.detail?n.t0.response.data.detail:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(s,d,p,f,S))},children:[Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"first_name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"First Name"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Enter First Name",value:s,onChange:function(e){return o(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"last_name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Last Name"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Enter Last Name",value:d,onChange:function(e){return u(e.target.value)}})]})})]}),Object(bt.jsx)(dt.a,{children:Object(bt.jsxs)(ot.a.Group,{controlId:"email",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Email"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"email",placeholder:"Enter Email Address",value:p,onChange:function(e){return O(e.target.value)}})]})}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"phone_number",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Phone Number"}),Object(bt.jsxs)(lt.a,{children:[Object(bt.jsx)(lt.a.Text,{id:"inputGroupPrepend",children:"+254"}),Object(bt.jsx)(ot.a.Control,{type:"number",maxLength:"9","aria-describedby":"inputGroupPrepend",placeholder:"Phone Number(Optional)",value:f,onChange:function(e){return g(e.target.value)}})]})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"password",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Password"}),Object(bt.jsxs)(lt.a,{className:"mb-3",children:[Object(bt.jsx)(ot.a.Control,{required:!0,type:N?"text":"password",placeholder:"Enter Password",value:S,onChange:function(e){return E(e.target.value)}}),Object(bt.jsx)(lt.a.Text,{id:"hide-show-pwd",title:N?"Hide password":"Show Password",onClick:function(){return w((function(e){return!e}))},children:N?Object(bt.jsx)("i",{className:"fas fa-eye-slash"}):Object(bt.jsx)("i",{className:"fas fa-eye"})})]})]})})]}),Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsx)(jt.a,{type:"submit",size:"md",children:"Sign In"})})]})]})},ea=a(170),ta=a(171),aa=a(172);var ra=function(e){e.match;var t=e.history,a=Object(r.useState)(""),c=Object(it.a)(a,2),n=c[0],s=c[1],o=Object(r.useState)(""),l=Object(it.a)(o,2),j=l[0],d=l[1],u=Object(r.useState)(""),b=Object(it.a)(u,2),h=b[0],p=b[1],O=Object(r.useState)(""),x=Object(it.a)(O,2),m=x[0],f=x[1],g=Object(r.useState)(""),y=Object(it.a)(g,2),v=y[0],S=y[1],E=Object(r.useState)(""),C=Object(it.a)(E,2),I=C[0],_=C[1],L=Object(r.useState)(""),N=Object(it.a)(L,2),w=N[0],k=N[1],R=Object(r.useState)(!1),T=Object(it.a)(R,2),P=T[0],A=T[1],D=Object(i.b)(),U=Object(i.c)((function(e){return e.userDetails})),G=U.error,M=U.loading,F=U.user,K=Object(i.c)((function(e){return e.userLogin})).userInfo,Q=Object(i.c)((function(e){return e.userUpdateProfile})).success,B=Object(i.c)((function(e){return e.orderListMy})),Y=B.loading,q=B.error,V=B.orders;return Object(r.useEffect)((function(){K?!F||Q||K.slug!==F.slug?(D({type:ne}),D(yt(K.slug)),D(function(){var e=Object(mt.a)(xt.a.mark((function e(t,a){var r,c,n,s,i;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Le}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,gt.a.get("/api/myorders",n);case 6:s=e.sent,i=s.data,t({type:Ne,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:we,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())):(s(F.first_name),d(F.last_name),p(F.email),f(F.phone_number)):t.push("/login")}),[D,t,K,F,Q]),Object(bt.jsx)(et.a,{children:Object(bt.jsx)(dt.a,{className:"justify-content-md-center my-4",children:Object(bt.jsxs)(ut.a,{xs:12,md:8,children:[w&&Object(bt.jsx)(St,{variant:"danger",children:w}),G&&Object(bt.jsx)(St,{variant:"danger",children:G}),M&&Object(bt.jsx)(Ct,{}),Object(bt.jsxs)(ea.a,{defaultActiveKey:"/profile",children:[Object(bt.jsx)(ta.a,{eventKey:"/profile",title:"Update Profile",children:Object(bt.jsxs)(ot.a,{onSubmit:function(e){e.preventDefault(),v!=I?k("Passwords do not match"):(D(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:re}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.put("/api/users/profile/update",e,s);case 6:i=t.sent,o=i.data,a({type:ae,payload:o}),a({type:H,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:ce,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}({id:F.id,first_name:n,last_name:j,email:h,phone_number:m,password:v})),k(""))},className:"my-4",children:[Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"first_name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"First Name"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Enter First Name",value:n,onChange:function(e){return s(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"last_name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Last Name"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Enter Last Name",value:j,onChange:function(e){return d(e.target.value)}})]})})]}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"email",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Email"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"email",placeholder:"Enter Email Address",value:h,onChange:function(e){return p(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"phone_number",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Phone Number"}),Object(bt.jsxs)(lt.a,{children:[Object(bt.jsx)(lt.a.Text,{id:"inputGroupPrepend",children:Object(bt.jsx)("i",{className:"fas fa-phone"})}),Object(bt.jsx)(ot.a.Control,{type:"text",maxLength:"13","aria-describedby":"inputGroupPrepend",placeholder:"Phone Number(Optional)",value:m,onChange:function(e){return f(e.target.value)}})]})]})})]}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"password",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Password"}),Object(bt.jsxs)(lt.a,{className:"mb-3",children:[Object(bt.jsx)(ot.a.Control,{type:P?"text":"password",placeholder:"Enter Password",value:v,onChange:function(e){return S(e.target.value)}}),Object(bt.jsx)(lt.a.Text,{id:"hide-show-pwd",title:P?"Hide password":"Show Password",onClick:function(){return A((function(e){return!e}))},children:P?Object(bt.jsx)("i",{className:"fas fa-eye-slash"}):Object(bt.jsx)("i",{className:"fas fa-eye"})})]})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"comfirmPassword",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Comfirm Password"}),Object(bt.jsxs)(lt.a,{className:"mb-3",children:[Object(bt.jsx)(ot.a.Control,{type:P?"text":"password",placeholder:"Comfirm Password",value:I,onChange:function(e){return _(e.target.value)}}),Object(bt.jsx)(lt.a.Text,{id:"hide-show-pwd",title:P?"Hide password":"Show Password",onClick:function(){return A((function(e){return!e}))},children:P?Object(bt.jsx)("i",{className:"fas fa-eye-slash"}):Object(bt.jsx)("i",{className:"fas fa-eye"})})]})]})})]}),Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsx)(jt.a,{type:"submit",variant:"primary",children:"Update"})})]})}),Object(bt.jsx)(ta.a,{eventKey:"my-orders",title:"My Orders",children:Y?Object(bt.jsx)(Ct,{}):q?Object(bt.jsx)(St,{variant:"danger",children:q}):Object(bt.jsx)("div",{className:"my-4",children:Object(bt.jsxs)(aa.a,{striped:!0,responsive:!0,className:"table-sm",children:[Object(bt.jsx)("thead",{children:Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("th",{children:"Date"}),Object(bt.jsx)("th",{children:"T.Price"}),Object(bt.jsx)("th",{children:"Payment method"}),Object(bt.jsx)("th",{children:"Paid"}),Object(bt.jsx)("th",{children:"Delivered"})]})}),V.map((function(e){return Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("td",{children:e.created_at.substring(0,10)}),Object(bt.jsx)("td",{children:z(e.totalPrice)}),Object(bt.jsxs)("td",{children:[" ","Paypal"===e.paymentMethod?Object(bt.jsx)(Gt.a,{src:"https://learning-tribes.com/wp-content/uploads/2021/01/paypal-logo-png-transparent-1024x333.png",style:{width:70,height:"auto"}}):Object(bt.jsx)(Gt.a,{src:"https://www.gtbank.co.ke/uploads/transforms/general/47459/mpesa_af599ee76a60a3ffac0b778428c6ae2f.png",style:{width:50,height:"auto"}})]}),Object(bt.jsxs)("td",{children:[" ",e.isPaid?Object(bt.jsx)("i",{class:"fas fa-check",style:{color:"rgb(67, 211, 0)"}}):Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})]}),Object(bt.jsx)("td",{children:e.isDelivered?Object(bt.jsx)("i",{class:"fas fa-check",style:{color:"rgb(67, 211, 0)"}}):Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})}),Object(bt.jsx)("td",{children:Object(bt.jsx)(tt.Link,{to:"order-details/".concat(e.slug),children:Object(bt.jsx)(jt.a,{variant:"primary",className:"btn-sm",title:"See order details",children:"See Details"})})})]},e.slug)}))]})})})]})]})})})};var ca=function(e){var t=e.step1,a=e.step2,r=e.step3,c=e.step4;return Object(bt.jsxs)(ct.a,{className:"justify-content-center mb-4",children:[Object(bt.jsx)(ct.a.Item,{children:t?Object(bt.jsx)(st.LinkContainer,{to:"/login",children:Object(bt.jsx)(ct.a.Link,{children:"Login"})}):Object(bt.jsx)(ct.a.Link,{disabled:!0,children:"Login"})}),Object(bt.jsx)(ct.a.Item,{children:a?Object(bt.jsx)(st.LinkContainer,{to:"/shipping",children:Object(bt.jsx)(ct.a.Link,{children:"Shipping"})}):Object(bt.jsx)(ct.a.Link,{disabled:!0,children:"Shipping"})}),Object(bt.jsx)(ct.a.Item,{children:r?Object(bt.jsx)(st.LinkContainer,{to:"/payment",children:Object(bt.jsx)(ct.a.Link,{children:"Payment"})}):Object(bt.jsx)(ct.a.Link,{disabled:!0,children:"Payment"})}),Object(bt.jsx)(ct.a.Item,{children:c?Object(bt.jsx)(st.LinkContainer,{to:"/placeorder",children:Object(bt.jsx)(ct.a.Link,{children:"Place Order"})}):Object(bt.jsx)(ct.a.Link,{disabled:!0,children:"Place Order"})})]})};var na=function(e){var t=e.history,a=Object(i.c)((function(e){return e.cart})).shippingAddress,c=Object(i.b)(),n=Object(i.c)((function(e){return e.userLogin})).userInfo,s=Object(r.useState)(a.county),o=Object(it.a)(s,2),l=o[0],j=o[1],d=Object(r.useState)(a.subCounty),u=Object(it.a)(d,2),b=u[0],h=u[1],p=Object(r.useState)(a.ward),O=Object(it.a)(p,2),x=O[0],m=O[1],f=Object(r.useState)(a.shippingCompany),g=Object(it.a)(f,2),y=g[0],v=g[1];return Object(r.useEffect)((function(){n||t.push("/login")}),[n]),Object(bt.jsxs)(ht,{children:[Object(bt.jsx)(ca,{step1:!0,step2:!0}),Object(bt.jsx)("h4",{className:"my-2",children:"Shipping Info"}),Object(bt.jsxs)(ot.a,{children:[Object(bt.jsxs)(ot.a.Group,{controlId:"county",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"County"}),Object(bt.jsxs)(ot.a.Control,{as:"select",value:l||"",onChange:function(e){return j(e.target.value)},children:[Object(bt.jsx)("option",{children:"Mombasa"}),Object(bt.jsx)("option",{children:"Kwale"}),Object(bt.jsx)("option",{children:"Kilifi"}),Object(bt.jsx)("option",{children:"Tana River"}),Object(bt.jsx)("option",{children:"Lamu"}),Object(bt.jsx)("option",{children:"Taita-Taveta"}),Object(bt.jsx)("option",{children:"Garissa"}),Object(bt.jsx)("option",{children:"Wajir"}),Object(bt.jsx)("option",{children:"Mandera"}),Object(bt.jsx)("option",{children:"Marsabit"}),Object(bt.jsx)("option",{children:"Isiolo"}),Object(bt.jsx)("option",{children:"Meru"}),Object(bt.jsx)("option",{children:"Tharaka-Nithi"}),Object(bt.jsx)("option",{children:"Embu"}),Object(bt.jsx)("option",{children:"Kitui"}),Object(bt.jsx)("option",{children:"Machakos"}),Object(bt.jsx)("option",{children:"Makueni"}),Object(bt.jsx)("option",{children:"Nyandarua"}),Object(bt.jsx)("option",{children:"Nyeri"}),Object(bt.jsx)("option",{children:"Kirinyaga"}),Object(bt.jsx)("option",{children:"Murang'a"}),Object(bt.jsx)("option",{children:"Kiambu"}),Object(bt.jsx)("option",{children:"Turkana"}),Object(bt.jsx)("option",{children:"West Pokot"}),Object(bt.jsx)("option",{children:"Samburu"}),Object(bt.jsx)("option",{children:"Trans Nzoia"}),Object(bt.jsx)("option",{children:"Uasin Gishu"}),Object(bt.jsx)("option",{children:"Elgeyo-Marakwet"}),Object(bt.jsx)("option",{children:"Nandi"}),Object(bt.jsx)("option",{children:"Baringo"}),Object(bt.jsx)("option",{children:"Laikipia"}),Object(bt.jsx)("option",{children:"Nakuru"}),Object(bt.jsx)("option",{children:"Narok"}),Object(bt.jsx)("option",{children:"Kajiado"}),Object(bt.jsx)("option",{children:"Kericho"}),Object(bt.jsx)("option",{children:"Bomet"}),Object(bt.jsx)("option",{children:"Kakamega"}),Object(bt.jsx)("option",{children:"Vihiga"}),Object(bt.jsx)("option",{children:"Bungoma"}),Object(bt.jsx)("option",{children:"Busia"}),Object(bt.jsx)("option",{children:"Siaya"}),Object(bt.jsx)("option",{children:"Kisumu"}),Object(bt.jsx)("option",{children:"Homa Bay"}),Object(bt.jsx)("option",{children:"Migori"}),Object(bt.jsx)("option",{children:"Kisii"}),Object(bt.jsx)("option",{children:"Nyamira"}),Object(bt.jsx)("option",{children:"Nairobi"})]})]}),Object(bt.jsxs)(ot.a.Group,{controlId:"county",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Sub County(constituency)"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Enter constituency",value:b||"",onChange:function(e){return h(e.target.value)}})]}),Object(bt.jsxs)(ot.a.Group,{controlId:"ward",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Ward"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Enter ward",value:x||"",onChange:function(e){return m(e.target.value)}})]}),Object(bt.jsxs)(ot.a.Group,{controlId:"shipping",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Shipping Company"}),Object(bt.jsx)(ot.a.Control,{required:!0,type:"text",placeholder:"Ship with..",value:y||"",onChange:function(e){return v(e.target.value)}})]}),Object(bt.jsx)(jt.a,{type:"submit",variant:"primary",onClick:function(e){var a;e.preventDefault(),c((a={county:l,subCounty:b,ward:x,shippingCompany:y},function(e){e({type:K,payload:a}),localStorage.setItem("shippingAddress",JSON.stringify(a))})),t.push("/payment"),console.log("Submitted")},children:"Next"})]})]})};var sa=function(e){var t=e.history,a=Object(i.c)((function(e){return e.cart})).shippingAddress,c=Object(i.b)(),n=Object(r.useState)(""),s=Object(it.a)(n,2),o=s[0],l=s[1];return a.county||t.push("/shipping"),Object(bt.jsxs)(ht,{children:[Object(bt.jsx)(ca,{step1:!0,step2:!0,step3:!0}),Object(bt.jsxs)(ot.a,{onSubmit:function(e){var a;e.preventDefault(),c((a=o,function(e){e({type:Q,payload:a}),localStorage.setItem("paymentMethod",JSON.stringify(a))})),t.push("/placeorder")},children:[Object(bt.jsxs)(ot.a.Group,{children:[Object(bt.jsx)(ot.a.Label,{children:"Choose a Payment Method"}),Object(bt.jsx)(Nt.a,{style:{padding:15,backgroundColor:"white"},children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{md:10,xs:8,children:Object(bt.jsx)(ot.a.Check,{checked:"",type:"radio",value:"M-Pesa",label:"Mpesa",id:"mpesa",name:"mpesaMethod",onChange:function(e){return l(e.target.value)}})}),Object(bt.jsx)(ut.a,{md:2,xs:4,children:Object(bt.jsx)(Gt.a,{src:"https://www.gtbank.co.ke/uploads/transforms/general/47459/mpesa_af599ee76a60a3ffac0b778428c6ae2f.png",style:{width:50,height:"auto"}})})]})}),Object(bt.jsx)(Nt.a,{style:{padding:15,backgroundColor:"white"},className:"my-3",children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{md:10,xs:8,children:Object(bt.jsx)(ot.a.Check,{type:"radio",value:"Paypal",label:"PayPal or Credit Card",id:"paypal",name:"paypalMethod",onChange:function(e){return l(e.target.value)}})}),Object(bt.jsx)(ut.a,{md:2,xs:4,children:Object(bt.jsx)(Gt.a,{src:"https://learning-tribes.com/wp-content/uploads/2021/01/paypal-logo-png-transparent-1024x333.png",style:{width:70,height:"auto"}})})]})})]}),Object(bt.jsx)(jt.a,{type:"submit",variant:"primary",children:"Next"})]})]})};var ia=function(e){var t=e.history,a=Object(i.c)((function(e){return e.userLogin})).userInfo,c=Object(i.c)((function(e){return e.orderCreate})),n=c.order,s=c.error,o=c.success,l=Object(i.b)(),j=Object(i.c)((function(e){return e.cart}));return j.itemsPrice=j.cartItems.reduce((function(e,t){return e+t.Qty*t.price}),0),j.shippingPrice=j.itemsPrice>5500?0:300,j.taxPrice=.16*j.itemsPrice,j.totalPrice=Number(j.itemsPrice)+Number(j.shippingPrice)+Number(j.taxPrice),Object(r.useEffect)((function(){a||t.push("/login"),o?(t.push("/orders/".concat(n.slug)),l({type:ge})):j.paymentMethod||t.push("/payment")}),[o,t]),Object(bt.jsxs)("div",{children:[Object(bt.jsx)(ca,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{md:8,children:Object(bt.jsxs)(Qt.a,{variant:"flush",children:[Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h4",{children:"Shipping"}),Object(bt.jsxs)("p",{children:[Object(bt.jsx)("strong",{children:"Shipping To: "}),j.shippingAddress.county,", ",j.shippingAddress.subCounty,", ",j.shippingAddress.ward]}),Object(bt.jsxs)("p",{children:[Object(bt.jsx)("strong",{children:"Shipping By: "}),j.shippingAddress.shippingCompany]})]}),Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h4",{children:"Payment Method"}),Object(bt.jsxs)("p",{children:[Object(bt.jsx)("strong",{children:"Method: "}),j.paymentMethod?"":"Choose Payment Method","M-Pesa"===j.paymentMethod?Object(bt.jsx)(Gt.a,{src:"https://www.gtbank.co.ke/uploads/transforms/general/47459/mpesa_af599ee76a60a3ffac0b778428c6ae2f.png",style:{width:50,height:"auto"}}):"","Paypal"===j.paymentMethod?Object(bt.jsx)(Gt.a,{src:"http://era-techuk.com/wp-content/uploads/2019/03/pypel-768x290.jpg",style:{width:70,height:"auto"}}):""]})]}),Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h4",{children:"Order Items"}),0===j.cartItems.length?Object(bt.jsxs)(St,{variant:"warning",children:["Your cart is empty ",Object(bt.jsx)(tt.Link,{to:"/shop",children:"Add Items to Cart"})]}):Object(bt.jsx)(Qt.a,{variant:"flush",children:j.cartItems.map((function(e,t){return Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{xs:2,xl:2,children:Object(bt.jsx)(tt.Link,{to:"/product/".concat(e.product),children:Object(bt.jsx)(Gt.a,{src:e.image,alt:e.name,style:{width:50,height:"auto"},thumbnail:!0,responsive:!0})})}),Object(bt.jsx)(ut.a,{xs:3,xl:3,children:Object(bt.jsx)(tt.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(bt.jsxs)(ut.a,{xs:4,xl:3,children:[e.Qty," x ",z(e.price)]}),Object(bt.jsx)(ut.a,{xs:3,xl:4,children:z((e.Qty*e.price).toFixed(2))})]})})}))})]})]})}),Object(bt.jsx)(ut.a,{md:4,className:"my-2",children:Object(bt.jsx)(Nt.a,{children:Object(bt.jsxs)(Qt.a,{variant:"flush",children:[s&&Object(bt.jsx)(St,{variant:"danger",children:s}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsx)("h3",{children:"Order Summary"})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Items:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(j.itemsPrice).toFixed(2))]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Shipping:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(j.shippingPrice).toFixed(2))," "]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Tax:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(j.taxPrice).toFixed(2))," "]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Total:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(j.totalPrice).toFixed(2))," "]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsx)(jt.a,{type:"button",disabled:0===j.cartItems,onClick:function(){l(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:xe}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.post("/api/orders/add",e,s);case 6:i=t.sent,o=i.data,a({type:me,payload:o}),a({type:B,payload:o}),localStorage.removeItem("cartItems"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:fe,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}({orderItems:j.cartItems,shippingAddress:j.shippingAddress,paymentMethod:j.paymentMethod,itemsPrice:j.itemsPrice,shippingPrice:j.shippingPrice,taxPrice:j.taxPrice,totalPrice:j.totalPrice})),console.log("order placed")},children:"Place Order"})})})]})})})]})]})},oa=a(103);var la=function(e){var t=e.match,a=e.history,c=t.params.id,n=Object(i.b)(),s=Object(r.useState)(!1),o=Object(it.a)(s,2),l=o[0],j=o[1],d=Object(i.c)((function(e){return e.orderDetails})),u=d.order,b=d.error,h=d.loading,p=Object(i.c)((function(e){return e.orderPay})),O=p.loading,x=p.success,m=Object(i.c)((function(e){return e.orderDeliver})),f=m.loading,g=m.success,y=Object(i.c)((function(e){return e.stkPush})),v=y.loading,S=y.success,E=y.error,C=Object(i.c)((function(e){return e.userLogin})).userInfo;return h||b||(u.itemsPrice=u.orderItems.reduce((function(e,t){return e+t.qty*t.price}),0).toFixed(2)),Object(r.useEffect)((function(){var e;C||a.push("/login"),!u||x||u.slug!==c||g?(n({type:_e}),n({type:Ge}),n((e=c,function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ye}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.get("/api/orders/".concat(e),s);case 6:i=t.sent,o=i.data,a({type:ve,payload:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Se,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))):u.isPaid||(window.paypal?j(!0):function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://www.paypal.com/sdk/js?client-id=AXI6IiovmA6YeA7lky_hOgAWGfYNl5ZLsBrcD2j4gZjZyq7xQxf7D9_w5DoqxFyHbh_7GW6HIWOCtq4q",e.async=!0,e.onload=function(){j(!0)},document.body.appendChild(e)}())}),[n,u,c,x,g]),h?Object(bt.jsx)(Ct,{}):b?Object(bt.jsx)(St,{variant:"danger",children:b}):Object(bt.jsxs)("div",{children:[Object(bt.jsxs)("p",{className:"my-4",children:["Order No: ",Object(bt.jsx)("span",{style:{color:"#f16100"},children:u._id})]}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{md:8,className:"my-2",children:Object(bt.jsxs)(Qt.a,{variant:"flush",children:[Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h4",{children:"Shipping"}),Object(bt.jsxs)("p",{children:["Shipping To: ",u.shippingAddress.county,", ",u.shippingAddress.subCounty,", ",u.shippingAddress.ward]}),Object(bt.jsxs)("p",{children:["Phone Number: (",u.user.phone_number,")"]}),Object(bt.jsxs)("p",{children:["Email: ",Object(bt.jsx)("a",{href:"mailto:".concat(u.user.email),children:u.user.email})]}),u.isDelivered?Object(bt.jsx)("p",{children:Object(bt.jsxs)(Bt.a,{bg:"success",children:["Delivered on ",u.deliveredAt.substring(0,10)]})}):Object(bt.jsxs)("p",{children:["Delivered: ",Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})]})]}),Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h4",{children:"Payment Method"}),Object(bt.jsxs)("p",{children:[Object(bt.jsx)("strong",{children:"Method: "}),u.paymentMethod?"":"Choose Payment Method","M-Pesa"===u.paymentMethod?Object(bt.jsx)(Gt.a,{src:"https://www.gtbank.co.ke/uploads/transforms/general/47459/mpesa_af599ee76a60a3ffac0b778428c6ae2f.png",style:{width:50,height:"auto"}}):"","Paypal"===u.paymentMethod?Object(bt.jsx)(Gt.a,{src:"https://learning-tribes.com/wp-content/uploads/2021/01/paypal-logo-png-transparent-1024x333.png",style:{width:70,height:"auto"}}):""]}),u.isPaid?Object(bt.jsx)("p",{children:Object(bt.jsxs)(Bt.a,{bg:"success",children:["Paid on ",u.paidAt.substring(0,10)]})}):Object(bt.jsxs)("p",{children:["Paid: ",Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})]})]}),Object(bt.jsxs)(Qt.a.Item,{children:[Object(bt.jsx)("h4",{children:"Items  In your Order"}),0===u.orderItems.length?Object(bt.jsxs)(St,{variant:"warning",children:["Your order is empty ",Object(bt.jsx)(tt.Link,{to:"/shop",children:"Add Items to order"})]}):Object(bt.jsx)(Qt.a,{variant:"flush",children:u.orderItems.map((function(e,t){return Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{xs:2,xl:2,children:Object(bt.jsx)(tt.Link,{to:"/product/".concat(e.product),children:Object(bt.jsx)(Gt.a,{src:e.image,alt:e.name,style:{width:50,height:"auto"},roundedCircle:!0,responsive:!0})})}),Object(bt.jsx)(ut.a,{xs:3,xl:3,children:Object(bt.jsx)(tt.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(bt.jsxs)(ut.a,{xs:4,xl:3,children:[e.qty," x ",z(e.price)]}),Object(bt.jsx)(ut.a,{xs:3,xl:4,children:z((e.qty*e.price).toFixed(2))})]})})}))})]})]})}),Object(bt.jsx)(ut.a,{md:4,className:"my-2",children:Object(bt.jsxs)(Nt.a,{children:[Object(bt.jsxs)(Qt.a,{variant:"flush",children:[Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsx)("h3",{children:"Order Summary"})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Items:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(u.itemsPrice).toFixed(2))]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Shipping:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(u.shippingPrice).toFixed(2))," "]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Tax:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(u.taxPrice).toFixed(2))," "]})]})}),Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{children:"Total:"}),Object(bt.jsxs)(ut.a,{children:["KES ",z(Number(u.totalPrice).toFixed(2))," "]})]})}),!u.isPaid&&Object(bt.jsxs)(Qt.a.Item,{children:[O&&Object(bt.jsx)(Ct,{}),"M-Pesa"===u.paymentMethod?Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsxs)(jt.a,{size:"sm",style:{borderRadius:"2rem"},onClick:function(){var e;n(function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:He}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.post("/api/payments/lnm-stk-push",e,s);case 6:i=t.sent,o=i.data,a({type:Ye,payload:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:qe,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}())},type:"submit",className:"btn btn-outline",variant:"outline-primary",children:[Object(bt.jsx)(Gt.a,{className:"mb-2",src:"https://cdn-images-1.medium.com/fit/t/1600/480/1*ku2fgiHHIfl_VOatvwwZGw.png",style:{width:150,height:"auto"}}),v&&Object(bt.jsx)(Et.a,{style:{color:"green"},as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})]})}):Object(bt.jsx)("div",{children:l?Object(bt.jsx)(oa.PayPalButton,{amount:u.totalPrice,onSuccess:function(e){n(function(e,t){return function(){var a=Object(mt.a)(xt.a.mark((function a(r,c){var n,s,i,o,l;return xt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Ee}),n=c(),s=n.userLogin.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,gt.a.put("/api/orders/pay/".concat(e),t,i);case 6:o=a.sent,l=o.data,r({type:Ce,payload:l}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),r({type:Ie,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(c,e))}}):Object(bt.jsx)(Ct,{})}),E&&Object(bt.jsx)(St,{variant:"danger",children:E})]}),Object(bt.jsx)(Qt.a.Item,{children:S&&Object(bt.jsx)(St,{variant:"success",children:"An stk push has been sent to your phone"})})]}),f&&Object(bt.jsx)(Ct,{}),C&&C.isAdmin&&u.isPaid&&!u.isDelivered&&Object(bt.jsx)(Qt.a.Item,{children:Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsxs)(jt.a,{type:"button",variant:"success",className:"btn btn-block",onClick:function(){n(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ae}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.put("/api/orders/deliver/".concat(e.slug),{},s);case 6:i=t.sent,o=i.data,a({type:De,payload:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ue,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(u))},children:["Mark as Delivered   ",Object(bt.jsx)("i",{class:"fas fa-truck"})]})})})]})})]})]})};var ja=function(e){var t=e.history,a=Object(i.b)(),c=Object(i.c)((function(e){return e.userList})),n=c.loading,s=c.error,o=c.users,l=Object(i.c)((function(e){return e.userLogin})).userInfo,j=Object(i.c)((function(e){return e.userDelete})),d=j.loading,u=j.error,b=j.success;Object(r.useEffect)((function(){l&&l.isAdmin?a(function(){var e=Object(mt.a)(xt.a.mark((function e(t,a){var r,c,n,s,i;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ie}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,gt.a.get("/api/users",n);case 6:s=e.sent,i=s.data,t({type:se,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:oe,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()):t.push("/shop")}),[a,t,l,b]);var h=function(e){window.confirm("Are you sure you want to delete this user?")&&a(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:de}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.delete("/api/users/delete/".concat(e),s);case 6:t.sent.data,a({type:je}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ue,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return Object(bt.jsxs)("div",{children:[Object(bt.jsx)("h2",{style:{color:"#000"},children:"users"}),d&&Object(bt.jsx)(Ct,{}),u&&Object(bt.jsx)(St,{variant:"danger",children:u}),n?Object(bt.jsx)(Ct,{}):s?Object(bt.jsx)(St,{variant:"danger",children:s}):Object(bt.jsxs)(aa.a,{striped:!0,responsive:!0,className:"table-sm",children:[Object(bt.jsx)("thead",{children:Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("th",{children:"Name"}),Object(bt.jsx)("th",{children:"Email"}),Object(bt.jsx)("th",{children:"Phone number"}),Object(bt.jsx)("th",{children:"Admin"})]})}),Object(bt.jsx)("tbody",{children:o.map((function(e){return Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("td",{children:e.full_name}),Object(bt.jsx)("td",{children:e.email}),Object(bt.jsx)("td",{children:e.phone_number}),Object(bt.jsxs)("td",{children:[" ",!0===e.isAdmin?Object(bt.jsx)("i",{class:"fas fa-check",style:{color:"rgb(67, 211, 0)"}}):Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})]}),Object(bt.jsxs)("td",{children:[Object(bt.jsx)(tt.Link,{to:"/user/edit/".concat(e.slug),children:Object(bt.jsx)(jt.a,{variant:"light",className:"btn-sm",title:"Edit User",children:Object(bt.jsx)("i",{class:"fas fa-user-edit"})})}),Object(bt.jsx)(jt.a,{variant:"danger",className:"btn-sm",title:"Delete User",onClick:function(){return h(e.slug)},children:Object(bt.jsx)("i",{class:"fas fa-trash-alt"})})]})]},e.slug)}))})]})]})};var da=function(e){var t=e.match,a=e.history,c=t.params.id,n=Object(r.useState)(""),s=Object(it.a)(n,2),o=s[0],l=s[1],j=Object(r.useState)(""),d=Object(it.a)(j,2),u=d[0],b=d[1],h=Object(r.useState)(""),p=Object(it.a)(h,2),O=p[0],x=p[1],m=Object(r.useState)(""),f=Object(it.a)(m,2),g=f[0],y=f[1],v=Object(r.useState)(!1),S=Object(it.a)(v,2),E=S[0],C=S[1],I=Object(r.useState)(""),_=Object(it.a)(I,2),L=_[0],N=_[1],w=Object(i.b)(),k=Object(i.c)((function(e){return e.userDetails})),R=k.error,T=k.loading,P=k.user,A=Object(i.c)((function(e){return e.userUpdate})),D=A.error,U=A.loading,G=A.success;return Object(r.useEffect)((function(){G?(w({type:Oe}),N("User Updated Successfully")):P.slug!==c?w(yt(c)):(l(P.first_name),b(P.last_name),x(P.email),y(P.phone_number),C(P.isAdmin))}),[P,c,G,a]),Object(bt.jsxs)("div",{children:[Object(bt.jsxs)(tt.Link,{to:"/users",children:[Object(bt.jsx)("i",{class:"fas fa-arrow-left"})," see all users"]}),Object(bt.jsxs)(ht,{children:[Object(bt.jsx)("h3",{style:{color:"#000",textAlign:"center"},className:"mb-2",children:"Edit User"}),U&&Object(bt.jsx)(Ct,{}),D&&Object(bt.jsx)(St,{variant:"danger",children:D}),G&&Object(bt.jsx)(St,{variant:"success",children:L}),T?Object(bt.jsx)(Ct,{}):R?Object(bt.jsx)(St,{variant:"danger",children:R}):Object(bt.jsxs)(ot.a,{onSubmit:function(e){e.preventDefault(),w(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:he}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.put("/api/users/update/".concat(e.slug),e,s);case 6:i=t.sent,o=i.data,a({type:be}),a({type:$,payload:o}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),a({type:pe,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()}({slug:P.slug,first_name:o,last_name:u,email:O,phone_number:g,isAdmin:E}))},children:[Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"first_name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"First Name"}),Object(bt.jsx)(ot.a.Control,{type:"text",placeholder:"Enter First Name",value:o,onChange:function(e){return l(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"last_name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Last Name"}),Object(bt.jsx)(ot.a.Control,{type:"text",placeholder:"Enter Last Name",value:u,onChange:function(e){return b(e.target.value)}})]})})]}),Object(bt.jsx)(dt.a,{children:Object(bt.jsxs)(ot.a.Group,{controlId:"email",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Email"}),Object(bt.jsx)(ot.a.Control,{type:"email",placeholder:"Enter Email Address",value:O,onChange:function(e){return x(e.target.value)}})]})}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"phone_number",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Phone Number"}),Object(bt.jsxs)(lt.a,{children:[Object(bt.jsx)(lt.a.Text,{id:"inputGroupPrepend",children:Object(bt.jsx)("i",{className:"fas fa-phone"})}),Object(bt.jsx)(ot.a.Control,{type:"text",maxLength:"13","aria-describedby":"inputGroupPrepend",placeholder:"Phone Number(Optional)",value:g,onChange:function(e){return y(e.target.value)}})]})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"isAdmin",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Permission"}),Object(bt.jsx)(lt.a,{className:"mb-3",children:Object(bt.jsx)(ot.a.Check,{type:"checkbox",label:"Is Admin",checked:E,onChange:function(e){return C(e.target.checked)}})})]})})]}),Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsx)(jt.a,{type:"submit",size:"md",children:"Update"})})]})]})]})};var ua=function(e){var t=e.history,a=(e.match,Object(i.b)()),c=Object(r.useState)(""),n=Object(it.a)(c,2),s=(n[0],n[1],Object(i.c)((function(e){return e.userLogin})).userInfo),o=Object(i.c)((function(e){return e.productCreate})),l=o.error,j=o.loading,d=o.success,u=o.product,b=Object(i.c)((function(e){return e.productList})),h=b.loading,p=b.error,O=b.products,x=b.pages,m=b.page,f=Object(i.c)((function(e){return e.productDelete})),g=f.loading,E=f.error,C=f.success,I=t.location.search;Object(r.useEffect)((function(){a({type:_}),s.isAdmin||t.push("/login"),d?t.push("/edit-product/".concat(u.slug)):a(Pt(I))}),[a,t,s,C,d,u,I]);var L=function(e){window.confirm("Are you sure you want to delete this product?")&&a(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:y}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.delete("/api/products/delete/".concat(e),s);case 6:t.sent.data,a({type:v}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:S,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return Object(bt.jsxs)("div",{children:[Object(bt.jsxs)(dt.a,{className:"align-items-center",children:[Object(bt.jsx)(ut.a,{children:Object(bt.jsx)("h2",{style:{color:"#000"},children:"Products"})}),Object(bt.jsx)(ut.a,{className:"text-end",children:Object(bt.jsx)(jt.a,{className:"my-3",onClick:function(){a(Dt())},title:"Create New Product",children:j?"product is being created ...":j?"":"ADD PRODUCT"})})]}),g&&Object(bt.jsx)(Ct,{}),E&&Object(bt.jsx)(St,{variant:"danger",children:E}),l&&Object(bt.jsx)(St,{variant:"danger",children:l}),h?Object(bt.jsx)(Ct,{}):p?Object(bt.jsx)(St,{variant:"danger",children:p}):Object(bt.jsxs)("div",{children:[Object(bt.jsxs)(aa.a,{striped:!0,responsive:!0,className:"table-sm",children:[Object(bt.jsx)("thead",{children:Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("th",{}),Object(bt.jsx)("th",{children:"Name"}),Object(bt.jsx)("th",{children:"Price(KES)"}),Object(bt.jsx)("th",{children:"Category"}),Object(bt.jsx)("th",{children:"Rating"})]})}),Object(bt.jsx)("tbody",{children:O.map((function(e){return Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("td",{children:Object(bt.jsx)(Gt.a,{src:e.image,alt:e.name,style:{width:50,height:"auto"},roundedCircle:!0,responsive:!0})}),Object(bt.jsx)("td",{children:e.name}),Object(bt.jsx)("td",{children:z(e.price)}),Object(bt.jsx)("td",{children:e.category}),Object(bt.jsx)("td",{children:Object(bt.jsx)(wt,{value:e.rating,color:"#f16100"})}),Object(bt.jsxs)("td",{children:[Object(bt.jsx)(tt.Link,{to:"/edit-product/".concat(e.slug),children:Object(bt.jsx)(jt.a,{variant:"light",className:"btn-sm",title:"Edit Product",children:Object(bt.jsx)("i",{class:"fas fa-user-edit"})})}),Object(bt.jsx)(jt.a,{variant:"danger",className:"btn-sm",title:"Delete Product",onClick:function(){return L(e.slug)},children:Object(bt.jsx)("i",{class:"fas fa-trash-alt"})})]})]},e.slug)}))})]}),Object(bt.jsx)(Tt,{pages:x,page:m,isAdmin:!0})]})]})};a(145);var ba=function(e){var t=e.match,a=e.history,c=t.params.id,n=Object(r.useState)(""),s=Object(it.a)(n,2),o=s[0],l=s[1],j=Object(r.useState)(""),d=Object(it.a)(j,2),u=d[0],b=d[1],h=Object(r.useState)(""),p=Object(it.a)(h,2),O=p[0],x=p[1],m=Object(r.useState)(""),g=Object(it.a)(m,2),y=g[0],v=g[1],S=Object(r.useState)(""),E=Object(it.a)(S,2),C=E[0],I=E[1],_=Object(r.useState)(""),k=Object(it.a)(_,2),R=k[0],T=k[1],P=Object(r.useState)(!1),A=Object(it.a)(P,2),D=A[0],U=A[1],G=Object(r.useState)(""),M=Object(it.a)(G,2),F=(M[0],M[1],Object(i.b)()),K=Object(i.c)((function(e){return e.productDetails})),Q=K.error,B=K.loading,z=K.product,H=Object(i.c)((function(e){return e.productUpdate})),Y=H.error,q=H.loading,V=H.success;Object(r.useEffect)((function(){V?(F({type:"PRODUCT_UPDATE_RESET"}),a.push("/products")):z.name&&z.slug===c?(l(z.name),b(z.image),x(z.price),v(z.category),I(z.description),T(z.countInStock)):F(At(c))}),[F,z,c,a,V]);var J=function(){var e=Object(mt.a)(xt.a.mark((function e(t){var a,r,n,s,i;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),r.append("product_slug",c),U(!0),e.prev=5,n={headers:{"Content-Type":"multipart/form-data"}},e.next=9,gt.a.post("/api/image-upload",r,n);case 9:s=e.sent,i=s.data,b(i),U(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),U(!1);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(bt.jsxs)("div",{children:[Object(bt.jsx)(tt.Link,{to:"/products",children:Object(bt.jsx)("i",{class:"fas fa-arrow-left"})}),Object(bt.jsxs)(ht,{children:[q&&Object(bt.jsx)(Ct,{}),Y&&Object(bt.jsx)(St,{variant:"danger",children:Y}),Object(bt.jsx)("h3",{style:{color:"#000",textAlign:"center"},className:"mb-2",children:"Edit Product"}),B?Object(bt.jsx)(Ct,{}):Q?Object(bt.jsx)(St,{variant:"danger",children:Q}):Object(bt.jsxs)(ot.a,{onSubmit:function(e){e.preventDefault(),F(function(e){return function(){var t=Object(mt.a)(xt.a.mark((function t(a,r){var c,n,s,i,o;return xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:L}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,gt.a.put("/api/products/update/".concat(e.slug),e,s);case 6:i=t.sent,o=i.data,a({type:N,payload:o}),a({type:f,payload:o}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),a({type:w,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()}({slug:c,name:o,image:u,price:O,category:y,description:C,countInStock:R}))},children:[Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Product Name"}),Object(bt.jsx)(ot.a.Control,{type:"text",placeholder:"Product Name",value:o,onChange:function(e){return l(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"price",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Price"}),Object(bt.jsx)(ot.a.Control,{type:"number",placeholder:"Price",value:O,onChange:function(e){return x(e.target.value)}})]})})]}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(Gt.a,{src:u,onChange:function(e){return b(e.target.src)}}),Object(bt.jsx)(ot.a.Control,{type:"file",onChange:J,multiple:!0}),D&&Object(bt.jsx)(Ct,{})]}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"category",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Category"}),Object(bt.jsx)(ot.a.Control,{type:"text",placeholder:"Category",value:y,onChange:function(e){return v(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"countInStock",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Stock"}),Object(bt.jsx)(ot.a.Control,{type:"number",placeholder:"Stock Count",value:R,onChange:function(e){return T(e.target.value)}})]})})]}),Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,{sm:12,md:12,xl:12,children:Object(bt.jsxs)(ot.a.Group,{controlId:"description",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Description"}),Object(bt.jsx)(ot.a.Control,{as:"textarea",rows:6,placeholder:"Product Description",value:C,onChange:function(e){return I(e.target.value)}})]})})}),Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsx)(jt.a,{type:"submit",size:"md",children:q?"updating product...":"Update"})})]})]})]})};var ha=function(e){var t=e.location,a=e.history,c=t.search?t.search.split("="[1]):"/shop",n=Object(r.useState)(""),s=Object(it.a)(n,2),o=(s[0],s[1],Object(r.useState)("")),l=Object(it.a)(o,2),j=l[0],d=l[1],u=Object(r.useState)(""),b=Object(it.a)(u,2),h=(b[0],b[1],Object(r.useState)("")),p=Object(it.a)(h,2),O=p[0],x=p[1],m=Object(r.useState)(""),f=Object(it.a)(m,2),g=f[0],y=f[1],v=Object(r.useState)(""),S=Object(it.a)(v,2),E=S[0],C=S[1],I=Object(r.useState)(""),_=Object(it.a)(I,2),L=_[0],N=_[1],w=Object(i.c)((function(e){return e.userLogin})).userInfo,k=Object(i.c)((function(e){return e.productCreate})),R=k.error,T=k.loading,P=k.success,A=Object(i.b)();return Object(r.useEffect)((function(){!w||w.IsAdmin?a.push(c):P&&a.push("/products")}),[a,w,c]),Object(bt.jsxs)("div",{children:[Object(bt.jsx)(tt.Link,{to:"/products",children:Object(bt.jsx)("i",{class:"fas fa-arrow-left"})}),Object(bt.jsxs)(ht,{children:[Object(bt.jsx)("h3",{style:{color:"#000",textAlign:"center"},className:"mb-2",children:"Create Product"}),T?Object(bt.jsx)(Ct,{}):R?Object(bt.jsx)(St,{variant:"danger",children:R}):Object(bt.jsxs)(ot.a,{onSubmit:function(e){e.preventDefault(),A(Dt())},children:[Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"name",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Product Name"}),Object(bt.jsx)(ot.a.Control,{type:"text",placeholder:"Product Name",value:j,onChange:function(e){return d(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"price",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Price"}),Object(bt.jsx)(ot.a.Control,{type:"number",placeholder:"Price",value:O,onChange:function(e){return x(e.target.value)}})]})})]}),Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ot.a.Group,{controlId:"price",className:"my-2",children:Object(bt.jsxs)(jt.a,{className:"btn btn-mdb-color btn-rounded float-left",children:[Object(bt.jsx)("span",{children:"Choose file"}),Object(bt.jsx)("input",{type:"file"})]})})}),Object(bt.jsxs)(dt.a,{children:[Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"category",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Category"}),Object(bt.jsx)(ot.a.Control,{type:"text",placeholder:"Category",value:g,onChange:function(e){return y(e.target.value)}})]})}),Object(bt.jsx)(ut.a,{sm:12,md:6,xl:6,children:Object(bt.jsxs)(ot.a.Group,{controlId:"countInStock",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Stock"}),Object(bt.jsx)(ot.a.Control,{type:"number",placeholder:"Stock Count",value:L,onChange:function(e){return N(e.target.value)}})]})})]}),Object(bt.jsx)(dt.a,{children:Object(bt.jsx)(ut.a,{sm:12,md:12,xl:12,children:Object(bt.jsxs)(ot.a.Group,{controlId:"description",className:"my-2",children:[Object(bt.jsx)(ot.a.Label,{children:"Description"}),Object(bt.jsx)(ot.a.Control,{as:"textarea",rows:6,placeholder:"Product Description",value:E,onChange:function(e){return C(e.target.value)}})]})})}),Object(bt.jsx)("div",{className:"d-grid gap-2 my-2",children:Object(bt.jsx)(jt.a,{type:"submit",size:"md",children:"Update"})})]})]})]})};var pa=function(e){var t=e.history,a=Object(i.b)(),c=Object(i.c)((function(e){return e.orderList})),n=c.loading,s=c.error,o=c.orders,l=Object(i.c)((function(e){return e.userLogin})).userInfo;return Object(r.useEffect)((function(){l&&l.isAdmin?a(function(){var e=Object(mt.a)(xt.a.mark((function e(t,a){var r,c,n,s,i;return xt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Re}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,gt.a.get("/api/orders",n);case 6:s=e.sent,i=s.data,t({type:Te,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Pe,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()):t.push("/shop")}),[a,t,l]),Object(bt.jsxs)("div",{children:[Object(bt.jsx)("h2",{style:{color:"#000"},children:"Orders"}),n?Object(bt.jsx)(Ct,{}):s?Object(bt.jsx)(St,{variant:"danger",children:s}):Object(bt.jsxs)(aa.a,{striped:!0,responsive:!0,className:"table-sm",hover:!0,children:[Object(bt.jsx)("thead",{children:Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("th",{children:"User"}),Object(bt.jsx)("th",{children:"Date"}),Object(bt.jsx)("th",{children:"T.Price"}),Object(bt.jsx)("th",{children:"Payment method"}),Object(bt.jsx)("th",{children:"Paid"}),Object(bt.jsx)("th",{children:"Delivered"})]})}),Object(bt.jsx)("tbody",{children:o.map((function(e){return Object(bt.jsxs)("tr",{children:[Object(bt.jsx)("td",{children:e.user&&e.user.full_name}),Object(bt.jsx)("td",{children:e.created_at.substring(0,10)}),Object(bt.jsx)("td",{children:z(e.totalPrice)}),Object(bt.jsxs)("td",{children:[" ","Paypal"===e.paymentMethod?Object(bt.jsx)(Gt.a,{src:"https://learning-tribes.com/wp-content/uploads/2021/01/paypal-logo-png-transparent-1024x333.png",style:{width:70,height:"auto"}}):Object(bt.jsx)(Gt.a,{src:"https://www.gtbank.co.ke/uploads/transforms/general/47459/mpesa_af599ee76a60a3ffac0b778428c6ae2f.png",style:{width:50,height:"auto"}})]}),Object(bt.jsxs)("td",{children:[" ",e.isPaid?Object(bt.jsx)("i",{class:"fas fa-check",style:{color:"rgb(67, 211, 0)"}}):Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})]}),Object(bt.jsxs)("td",{children:[" ",e.isDelivered?Object(bt.jsx)("i",{class:"fas fa-check",style:{color:"rgb(67, 211, 0)"}}):Object(bt.jsx)("i",{class:"fas fa-times-circle",style:{color:"rgb(255, 0, 0)"}})]}),Object(bt.jsx)("td",{children:Object(bt.jsx)(tt.Link,{to:"/order-details/".concat(e.slug),children:Object(bt.jsx)(jt.a,{variant:"primary",className:"btn-sm",title:"See order details",children:"See Details"})})})]},e.slug)}))})]})]})};var Oa=function(){return Object(bt.jsxs)(tt.HashRouter,{children:[Object(bt.jsx)(_t,{}),Object(bt.jsx)("main",{children:Object(bt.jsxs)(et.a,{children:[Object(bt.jsx)(at.d,{path:"/login",component:$t}),Object(bt.jsx)(at.d,{path:"/register",component:Xt}),Object(bt.jsx)(at.d,{path:"/profile",component:ra}),Object(bt.jsx)(at.d,{path:"/shop",component:Ut,exact:!0}),Object(bt.jsx)(at.d,{path:"/",component:Ft,exact:!0}),Object(bt.jsx)(at.d,{path:"/cart/:id?",component:Zt}),Object(bt.jsx)(at.d,{path:"/product/:id",component:Vt}),Object(bt.jsx)(at.d,{path:"/products",component:ua}),Object(bt.jsx)(at.d,{path:"/edit-product/:id",component:ba}),Object(bt.jsx)(at.d,{path:"/create-product",component:ha}),Object(bt.jsx)(at.d,{path:"/shipping",component:na}),Object(bt.jsx)(at.d,{path:"/payment",component:sa}),Object(bt.jsx)(at.d,{path:"/placeorder",component:ia}),Object(bt.jsx)(at.d,{path:"/order-details/:id",component:la}),Object(bt.jsx)(at.d,{path:"/orders",component:pa}),Object(bt.jsx)(at.d,{path:"/users",component:ja}),Object(bt.jsx)(at.d,{path:"/user/edit/:id",component:da})]})}),Object(bt.jsx)(Lt,{})]})},xa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,186)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))};s.a.render(Object(bt.jsx)(i.a,{store:Xe,children:Object(bt.jsx)(Oa,{})}),document.getElementById("root")),xa()}},[[146,1,2]]]);
//# sourceMappingURL=main.7ecb6ea7.chunk.js.map